<div data-controller="form-submissions" data-form-submissions-form-type-value="copy-requests">
  <div id="request-groups-container" data-form-submissions-target="container">
    <div class="request-group" data-index="0">
      <h4 class="request-group-title">Request 1</h4>
      <div class="row">
        <div class="col-md-6">
          <%= f.input :collection_title, label: "Collection Title", wrapper_html: { class: "mb-3" } %>
        </div>
        <div class="col-md-6">
          <%= f.input :box, label: "Box", required: true, wrapper_html: { class: "mb-3" } %>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <%= f.input :folder, label: "Folder", required: true, wrapper_html: { class: "mb-3" } %>
        </div>
        <div class="col-md-6">
          <%= f.input :identifier, label: "Title/Identifier/File Name/Description", wrapper_html: { class: "mb-3" } %>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <%= f.input :estimated_pages, label: "Estimated Number of Pages", as: :integer, required: true, wrapper_html: { class: "mb-3" } %>
        </div>
        <div class="col-md-6">
          <%= f.input :format, 
              label: "Format", 
              as: :select,
              collection: [
                ['TIFF (600 DPI): $5 per image', 'tiff'],
                ['PDF: $0.50 per page', 'pdf'],
                ['Photocopy: $0.50 per page plus postage (Up to 100 pages: $5.00; Over 100 pages, USPS rate)', 'photocopy']
              ],
              include_blank: "Select format...",
              required: true,
              wrapper_html: { class: "mb-3" } %>
        </div>
      </div>
    </div>
    
    <!-- Additional request groups (hidden by default) -->
    <% (1..9).each do |i| %>
      <div class="request-group" data-index="<%= i %>" style="display: none;">
        <h4 class="request-group-title">Request <%= i + 1 %></h4>
        <div class="row">
          <div class="col-md-6">
            <%= f.input "collection_title_#{i.to_s.rjust(2, '0')}".to_sym, 
                label: "Collection Title", 
                wrapper_html: { class: "mb-3" } %>
          </div>
          <div class="col-md-6">
            <%= f.input "box_#{i.to_s.rjust(2, '0')}".to_sym, 
                label: "Box", 
                wrapper_html: { class: "mb-3" } %>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <%= f.input "folder_#{i.to_s.rjust(2, '0')}".to_sym, 
                label: "Folder", 
                wrapper_html: { class: "mb-3" } %>
          </div>
          <div class="col-md-6">
            <%= f.input "identifier_#{i.to_s.rjust(2, '0')}".to_sym, 
                label: "Title/Identifier/File Name/Description", 
                wrapper_html: { class: "mb-3" } %>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <%= f.input "estimated_pages_#{i.to_s.rjust(2, '0')}".to_sym, 
                label: "Estimated Number of Pages", 
                as: :integer,
                wrapper_html: { class: "mb-3" } %>
          </div>
          <div class="col-md-6">
            <%= f.input "format_#{i.to_s.rjust(2, '0')}".to_sym, 
                label: "Format", 
                as: :select,
                collection: [
                  ['TIFF (600 DPI): $5 per image', 'tiff'],
                  ['PDF: $0.50 per page', 'pdf'],
                  ['Photocopy: $0.50 per page plus postage (Up to 100 pages: $5.00; Over 100 pages, USPS rate)', 'photocopy']
                ],
                include_blank: "Select format...",
                wrapper_html: { class: "mb-3" } %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
  
  <div class="request-actions mt-4">
    <button type="button" data-form-submissions-target="addBtn" data-action="click->form-submissions#addRequest" class="btn btn-success me-2">
      <i class="fas fa-plus"></i> Add a new request
    </button>
    <button type="button" data-form-submissions-target="removeBtn" data-action="click->form-submissions#removeRequest" class="btn btn-outline-secondary" style="display: none;">
      <i class="fas fa-minus"></i> Remove last request
    </button>
  </div>
</div>

<!-- Acknowledgements Section -->
<div class="mt-5">
  <h3 class="mb-3">Acknowledgements</h3>
  <p>Due to the fragile and rare nature of the materials held by the SCRC, all duplication is performed by staff members.</p>
  
  <div class="row">
    <div class="col-12">
      <%= f.input :duplication_limits, 
          as: :boolean,
          required: true,
          wrapper_html: { class: "mt-2" },
          hint: raw(t('helpers.description.form.duplication_limits')) %>
    </div>
  </div>
  
  <div class="row">
    <div class="col-12">
      <%= f.input :copyright_acknowledgment, 
          as: :boolean,
          required: true,
          wrapper_html: { class: "mt-2" },
          hint: raw(t('helpers.description.form.copyright_acknowledgment')) %>
    </div>
  </div>
</div>
